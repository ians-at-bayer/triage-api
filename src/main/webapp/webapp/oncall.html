<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <title>Support Triage - On Call Card</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Support Triage - On Call Card">

    <!-- Style -->
    <link rel="stylesheet" href="style.css">

    <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>

    <script type="text/javascript" defer>
        const urlParams = new URLSearchParams(window.location.search);
        const teamId = urlParams.get('teamId')

        if (teamId != null) {
            $.getJSON("on-call/" + teamId).done(function (data) {
                $("#name").html(data.name);
                $("#slack-id").html(data.slackId);
            });

            $.getJSON("rotation-config/" + teamId).done(function (data) {
                $("#rotation-length").html(data.rotationFrequencyDays + ' days');
                $("#rotation-end").html(data.nextRotationTime + ' UTC');
            });
        }
    </script>

</head>

<body>


<div>
    <div>
        <h3>Support Triage - On Call Card</h3>

        <p>The person who is currently on call is:</p>
        <table class="table table-condensed">
            <tr>
                <th>Name</th>
                <td id="name"></td>
            </tr>
            <tr>
                <th>Slack ID</th>
                <td id="slack-id"></td>
            </tr>
            <tr>
                <th>Rotation Length</th>
                <td id="rotation-length"></td>
            </tr>
            <tr>
                <th>On Support Until</th>
                <td id="rotation-end"></td>
            </tr>
        </table>
        <p>Please bookmark this page to stay updated with on call changes.</p>
    </div>
</div>

</body>
</html>